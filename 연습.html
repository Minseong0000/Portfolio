<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="utf-8">
  <title>title</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
  <style>
    body,
    html {
      margin: 0;
    }

    .scroller {
      height: 100vh;
    }

    .orange {
      display: flex;
      height: 100vh;
      justify-content: center;
      align-items: center;
      background-color: #753500;
    }

    .text,
    h2 {
      color: #fff;
    }

    .black {
      display: flex;
      height: 100vh;
      justify-content: space-around;
      align-items: center;
      background-color: #070707;
    }

    .blue {
      height: 100vh;
      background-color: #00026d;
    }


    .text-wrap {
      position: relative;
      overflow: hidden;
      width: 450px;
      height: 80vh;
    }

    .p-wrap {
      position: relative;
      overflow: hidden;
      width: 450px;
      height: 80vh;
    }

    .panel-text {
      position: absolute;
      inset: 0;
      z-index: 1;
      width: 100%;
      height: 100%;
      font-size: 40px;
      text-transform: uppercase;
      font-weight: 900;
      text-align: center;
      background-color: #070707;

      transform: translateY(25%);
      opacity: 1;
    }

    .panel {
      position: absolute;
      inset: 0;
      z-index: 1;
      background-image: url('https://images.unsplash.com/photo-1685558823509-91afe12dccb3?crop=entropy&cs=srgb&fm=jpg&ixid=M3wzMjM4NDZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2ODc5NTg1MDF8&ixlib=rb-4.0.3&q=85');
      background-position: 50% 50%;
      background-size: cover;
      background-repeat: no-repeat;
    }

    .panel.blue {
      z-index: auto;
    }

    .panel.red {
      z-index: auto;
      background-color: red;
      background-image: url('https://images.unsplash.com/photo-1676902683876-527e9816ae4e?crop=entropy&cs=srgb&fm=jpg&ixid=M3wzMjM4NDZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2ODc5NTg1MDF8&ixlib=rb-4.0.3&q=85');
    }

    .panel.orange {
      z-index: auto;
      background-color: #cf5d00;
      background-image: url('https://images.unsplash.com/photo-1687193913065-a1c4aa6a0b7a?crop=entropy&cs=srgb&fm=jpg&ixid=M3wzMjM4NDZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2ODc5NTg1MDF8&ixlib=rb-4.0.3&q=85');
    }

    .panel.purple {
      z-index: auto;
      background-color: #808;
      background-image: url('https://images.unsplash.com/photo-1687670487816-42294667fd2b?crop=entropy&cs=srgb&fm=jpg&ixid=M3wzMjM4NDZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2ODc5NTg1MDF8&ixlib=rb-4.0.3&q=85');
    }

    p {
      font-size: initial;
      line-height: 1.5;
      color: white;
    }
  </style>
  <!-- jquery script -->
  <script src="./assets/scripts/jquery-3.7.1.min.js"></script>
  <!-- gsap -->
  <script src="./assets/scripts/gsap.min.js"></script>
  <!-- scroll trigger -->
  <script src="./assets/scripts/ScrollTrigger.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/smooth-scrollbar/8.5.2/smooth-scrollbar.js"></script>
</head>

<body>

  <div class="scroller">

    <section class="orange">
      <div class="text">This is some text inside of a div block.</div>
    </section>

    <section class="black">

      <div class="text-wrap">
        <div class="panel-text blue-text">
          <h2>Heading</h2>
          <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolor, esse cum dolorem veniam doloribus id,
            recusandae quidem cumque impedit deleniti distinctio adipisci tenetur saepe ratione harum. Perspiciatis quos
            fugit natus.</p>
        </div>
      </div>

      <div class="p-wrap">
        <div class="panel blue">

        </div>
        <div class="panel red">

        </div>
        <div class="panel orange">

        </div>
        <div class="panel purple">

        </div>
      </div>

    </section>

    <section class="blue"></section>

  </div>
</body>
<script>
  gsap.registerPlugin(ScrollTrigger);

  let bodyScrollBar = Scrollbar.init(document.body, {
    damping: 0.1,
    delegateTo: document,
  });

  ScrollTrigger.scrollerProxy(".scroller", {
    scrollTop(value) {
      if (arguments.length) {
        bodyScrollBar.scrollTop = value;
      }
      return bodyScrollBar.scrollTop;
    },
  });

  bodyScrollBar.addListener(ScrollTrigger.update);
  gsap.set(".panel", { zIndex: (i, target, targets) => targets.length - i });
  var images = gsap.utils.toArray('.panel:not(.purple)');

  images.forEach((image, i) => {
    var tl = gsap.timeline({
      scrollTrigger: {
        trigger: "section.black",
        scroller: ".scroller",
        start: () => "top -" + (window.innerHeight * (i + 0.5)),
        end: () => "+=" + window.innerHeight,
        scrub: true,
        toggleActions: "play none reverse none",
        invalidateOnRefresh: true,
      }

    })

    tl.to(image, { height: 0 });
  });

  ScrollTrigger.create({
    trigger: "section.black",
    scroller: ".scroller",
    scrub: true,
    markers: true,
    pin: true,
    start: () => "top top",
    end: () => "+=" + ((images.length + 1) * window.innerHeight),
    invalidateOnRefresh: true,
  });
</script>

</html>